---
title: "CASA0025 Final Project: Mapping Vineyard Suitability in the UK Using Remote Sensing and Machine Learning"
format: html
editor: visual
bibliography: references.bib
---

# Mapping Vineyard Suitability in the UK Using Remote Sensing and Machine Learning

## 1. Project Summary

Fill in the sections below to provide a brief summary of your project. Each section should have no more than 100 words. Do not edit any of the headings.

### 1.2 Introduction

#### 1.2.1 Background

#### 1.2.2 Literature review

### 1.3 Problem Statement

Our project addresses the challenge of identifying optimal regions for grape vineyard cultivation in the UK by integrating multiple environmental and climatic factors. Traditional approaches often rely on expert intuition or static maps, lacking dynamic data-driven analysis. Recent studies show that from 1981–2018, growing season temperatures in major UK viticulture regions have risen by approximately 1°C, now exceeding 14°C GST, accelerating vineyard expansion and variety diversification [@nesbitt2022climate]. With climate change increasingly affecting viticulture conditions[@fraga2013future], it is essential to develop an interactive tool that combines historical data, remote sensing, and machine learning. Our application allows users to dynamically assess vineyard suitability at various spatial scales and across time, providing a more adaptive and evidence-based decision-making framework for land use planning and agricultural investment.

### 1.4 End User

The application is designed for vineyard developers. It enables users to explore vineyard suitability across the UK, making predictions based on environmental factors such as temperature, elevation, and slope. By offering spatial and temporal insights, the tool helps optimize land selection, support climate adaptation, and reduce investment risks. Its intuitive interface ensures accessibility even for users without technical GIS expertise. Additionally, by interviewing investors interested in establishing vineyards in the UK, we collected key insights into ideal growing conditions. Investors prioritize stable climates and seek regions suitable for cultivating high-quality grape varieties, further informing the application’s focus and design.

<div>

![Records of communication with users](images/end_user.png){fig-align="center" width="40%"}

</div>

### 1.5 Data

Temperature: MODIS/006/MOD11A2 — MODIS Land Surface Temperature and Emissivity

GST : TerraClimate dataset — IDAHO_EPSCOR/TERRACLIMATE

GDD : TerraClimate dataset — IDAHO_EPSCOR/TERRACLIMATE

GSP : TerraClimate dataset — IDAHO_EPSCOR/TERRACLIMATE

Slope: USGS/SRTMGL1_003 — NASA SRTM Digital Elevation 30m

Elevation: JAXA/ALOS/AW3D30/V2_2 — ALOS

Existing Vineyard: Exported from OpenStreetMap (OSM)

Land Use: Land Cover Map 10m — UK Centre for Ecology & Hydrology

-   **GST** ensures warm enough growing season temperatures.

-   **GDD** captures accumulated heat units necessary for ripening.

-   **GSP** screens for sufficient but not excessive rainfall.

-   **Slope** helps in drainage and solar exposure.

-   **Elevation** filters areas too high or low for optimal grape production.

### 1.6 Methodology

We preprocess environmental datasets by applying thresholds for suitable viticultural conditions, including temperature, precipitation, elevation, solar radiation, and vegetation cover. After stacking key features, stratified sampling generates positive (vineyard) and negative (unsuitable) training data for a Random Forest classifier. The model predicts continuous suitability scores, categorizing regions into unsuitable, suitable, and highly suitable (\>70%) areas, with high accuracy validated by cross-validation. Predictions support county-level selections, user-drawn custom polygons, and regional comparisons between two areas. Time-series analyses from 2010 to 2023 allow users to explore spatial and temporal shifts in vineyard suitability under changing environmental conditions.

### 1.7 Interface

The application features a modular, panel-based interface designed for clarity, interactivity, and user-friendliness. Module 1 allows users to select any UK county to view historical trends in vineyard suitability. Module 2 enables users to draw custom areas directly on the map and run machine learning-based suitability predictions for those regions. Module 3 supports side-by-side comparison between two user-defined regions to facilitate comparative spatial analysis. Results are displayed through interactive maps, dynamically updating area charts, and easy-to-read statistics. The entire interface is built using Earth Engine’s UI tools to ensure smooth interaction even with large datasets.

## 2 The Application

Replace the link below with the link to your application.

::: column-page
<iframe src="https://ollielballinger.users.earthengine.app/view/turkey-earthquake" width="100%" height="700px">

</iframe>
:::

## 3. How it Works

### 3.1 Data Preprocessing

``` javascript
var countries = ee.FeatureCollection("USDOS/LSIB_SIMPLE/2017");
var UK_boundary = countries.filter(ee.Filter.eq("country_na", "United Kingdom"));
Map.centerObject(UK_boundary, 6);
```

This project focuses on the United Kingdom. Five environmental variables were selected based on literature thresholds:\
GST 14.1–15.5°C (Nesbitt et al., 2022),\
GDD 974–1223°C·days (Nesbitt et al., 2022),\
GSP 273–540mm (Nesbitt et al., 2022),\
Slope 5–10% (Fraga et al., 2018),\
Elevation 0–220m (Gladstones, 1992).\
Landsat 8 imagery was clipped to the UK boundary and masks were generated with moderate threshold adjustments.

``` javascript
var gstMask = gst.gte(14.0).and(gst.lte(16.0));
var gddMask = gdd.gte(950).and(gdd.lte(1250));
var gspMask = gsp.gte(250).and(gsp.lte(600));
var slopeMask = slope.gte(2).and(slope.lte(15));
var elevationMask = elevation.gte(5).and(elevation.lte(250));
```

::: {layout-ncol="3"}
![GSD Map](images/gsd.png)

![Slope Map](images/slope.png)

![Elevation Map](images/elevation.png)

![GDD Map](images/gdd.png)

![GSP Map](images/gsp.png)

![Land Use Map](images/landuse.png)
:::

Land cover was reclassified to retain grassland, shrubland, and cropland.\
All masks were combined using logical AND operations to select suitable areas.

### 3.2 Machine Learning Modeling

Environmental factors (GST, GDD, GSP, slope, elevation, aspect, latitude) are extracted for a selected region and year from TerraClimate and SRTM datasets.

```{r}
var factors = GrapeML.computeEnvironmentalFactors(region, year);
```

A binary suitability mask is generated by applying threshold filters.

```{r}
var suitabilityMask = GrapeML.computeSuitabilityMask(factors);
```

Positive points are sampled within vineyards, negatives from unsuitable areas. Samples are labeled and randomly split into 70% training and 30% testing sets.

```{r}
var positivePoints = ee.FeatureCollection.randomPoints({region: vineyards.geometry(), points: 200});
var negativePoints = ee.FeatureCollection.randomPoints({region: region, points: 400});
```

A Random Forest classifier with 50 trees is trained on the training data.

```{r}
var classifier = ee.Classifier.smileRandomForest({numberOfTrees: 50}).train({...});
```

Predictions generate a probability surface; areas with scores >0.7 are considered highly suitable.

```{r}
var suitabilityScore = featureImage.classify(probabilityClassifier);
```

Fallback to the basic mask is used if sampling fails.
### 3.3 Function 1 :

#### 3.3.1 xxxxx
xxxxx

#### 3.3.2 xxxxx
xxxxx

### 3.4 Function 2 :

#### 3.4.1 xxxxx
xxxxx

#### 3.4.2 xxxxx
xxxxx

## 4. Interaction Design

## 5.Limitations

## 6.Future work

## 7.References